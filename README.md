# prokopishena_students


## Використання методів рефакторингу

### ****Не визначені змінні** (Issue Type: Undefined Variables)

#### Проблема:
- `require' is not defined (no-undef)`
- `'__dirname' is not defined`
- `'re' is not defined`

#### Метод рефакторингу для вирішення:
- *Introduce Local Extension* - запровадження локального розширенняапровадження локального розширення

### **Не використовувана змінна** (Issue Type: Unused Variables)

#### Проблема:
- `'newApplication' is assigned a value but never used` на рядку 257.

#### Метод рефакторингу для вирішення:
- *Dead Code* - видалення непрацюючого коду

### **Примітивне дублювання коду** (Issue Type: Code Duplication)

#### Проблема:
Дублювання коду в обробниках запитів для отримання даних з бази (наприклад, `/fetch-select-data/faculties`, `/fetch-select-data/specialties`, `/fetch-select-data/benefits`, `/fetch-select-data/dormitories/:dormitoryId`).

#### Метод рефакторингу для вирішення:
- *Duplicate Code* — витягнення спільної логіки в окрему функцію 

### **Складність і зрозумілість коду** (Issue Type: Code Complexity)

#### Проблема:
Обробник POST-запиту для подачі заявки має великий обсяг коду з перевірками та створенням записів у базі даних. Це може ускладнити підтримку коду при необхідності змін.

#### Метод рефакторингу для вирішення:
- *Extract Method* витягнення логіки для обробки введених даних в окрему функцію 

### **Відсутність обробки помилок для асинхронних функцій** (Issue Type: Error Handling)

#### Проблема:
Не всі асинхронні функції мають належну обробку помилок.

#### Метод рефакторингу для вирішення:
- *Introduce Assertion* - для всіх асинхронних операцій додано обробку помилок, особливо в обробниках маршрутів.

### **Використання `expect` всередині умовного блоку** (Issue Type: Jest Testing Rule Violation)  

#### Проблема:
Функція `expect` викликається умовно (наприклад, всередині `if`, `for`, `while`, `try/catch`), що може призвести до того, що деякі перевірки не будуть виконані.  

#### Метод рефакторингу для вирішення:
- *Decompose Conditional* - розбиття складних умовних конструкцій на окремі функції або перевірки, щоб усунути умовну логіку навколо викликів expect

### **Довгий список параметрів**

#### Проблема:
У маршруті POST /submit_application у файлі form_application.js використовується велика кількість параметрів, отриманих через деструктуризацію req.body

#### Метод рефакторингу для вирішення:
- *Introduce Parameter Object* — групування пов’язаних параметрів у єдиний об’єкт applicationData

### **Дубльований код**

#### Проблема:
У файлі select.js функції fetchDataAndPopulateSelect і fetchSpecialtiesByFacultyId містять схожу логіку для заповнення елементів <select> даними, отриманими з сервера

#### Метод рефакторингу для вирішення:
- *Duplicate Code* — витягнення спільної логіки в окрему функцію populateSelectFromData, яка використовується обома функціями

### **Магічні числа та рядки**

#### Проблема:
Число 5500 (порт сервера) та рядки типу 'fetch-select-data/faculties' використовуються напряму без пояснень.

#### Метод рефакторингу для вирішення:
- *Replace Magic Number with Symbolic Constant*— заміна захардкоджених чисел на іменовані константи (PORT, STATUS_OK, STATUS_NOT_FOUND, STATUS_SERVER_ERROR).

### **Повернення кодів помилок**

#### Проблема:
У маршруті GET /fetch-select-data/specialties/:facultyId у файлі form_application.js повертається код стану 404 із JSON-повідомленням про помилку, що змішує обробку помилок із нормальним потоком виконання.

#### Метод рефакторингу для вирішення:
- *Replace Error Code with Exception* — заміна повернення коду стану на викидання виключення, яке обробляється в блоці try-catch

### **Кілька обов'язків**

#### Проблема:
файл form_application.js обробляє налаштування сервера, визначення моделі та численні обробники маршрутів (наприклад, для факультетів, спеціальностей, пільг, гуртожитків і цін), надаючи йому занадто багато обов’язків і порушуючи принцип єдиної відповідальності (SRP).

#### Метод рефакторингу для вирішення:
- *SOLID* — Обробники маршрутів переміщено в окремі модулі маршрутизатора (наприклад, facultyRouter , specialtyRouter , benefitRouter , dormitoryRouter , priceRouter ). Кожен модуль обробляє маршрути для певної сутності, зменшуючи зв’язок і гарантуючи, що кожен модуль має одну причину для зміни.